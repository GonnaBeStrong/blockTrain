<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sixoneseven.blocktrain.repo.mapper.FileMapper">

    <!-- 结果映射 -->
    <resultMap id="BaseResultMap" type="com.sixoneseven.blocktrain.repo.entity.File">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="path" property="path" jdbcType="VARCHAR"/>
        <result column="size" property="size" jdbcType="VARCHAR"/>
        <result column="resolution" property="resolution" jdbcType="VARCHAR"/>
        <result column="detail" property="detail" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="from" property="from" jdbcType="VARCHAR"/>
        <result column="form" property="form" jdbcType="VARCHAR"/>
        <result column="longitude" property="longitude" jdbcType="VARCHAR"/>
        <result column="latitude" property="latitude" jdbcType="VARCHAR"/>
        <result column="lite" property="lite" jdbcType="VARCHAR"/>
        <result column="upload_time" property="uploadTime" jdbcType="TIMESTAMP"/>
        <result column="shoot_time" property="shootTime" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!-- 根据ID查询文件信息 -->
    <select id="getFileByDataId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        SELECT id,path,size,resolution,detail,name,`from`,form,upload_time,longitude,latitude,lite,shoot_time
        FROM file
        WHERE id = #{dataId,jdbcType=BIGINT}
    </select>


    <select id="getAllFile" resultMap="BaseResultMap">
        SELECT id,path,size,resolution,detail,name,`from`,form,upload_time,longitude,latitude,lite,shoot_time
        FROM file
    </select>

    <!-- 插入文件地址 -->
    <insert id="insertOneFile" parameterType="com.sixoneseven.blocktrain.repo.entity.File" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO file (
            path,
            size,
            resolution,
            detail,
            upload_time,
            name,
            `from`,
            form,
            longitude,
            latitude,
            lite,
            shoot_time
        ) VALUES (
                     #{path,jdbcType=VARCHAR},
                     #{size,jdbcType=VARCHAR},
                     #{resolution,jdbcType=VARCHAR},
                     #{detail,jdbcType=VARCHAR},
                     #{uploadTime,jdbcType=TIMESTAMP},
                     #{from,jdbcType=VARCHAR},
                     #{form,jdbcType=VARCHAR},
                     #{name,jdbcType=VARCHAR},
                     #{longitude,jdbcType=VARCHAR},
                     #{latitude,jdbcType=VARCHAR},
                     #{lite,jdbcType=VARCHAR},
                     #{shootTime,jdbcType=TIMESTAMP}
                 )
    </insert>

    <!-- 更新用户 -->

</mapper>